<div class="row">
  <div class="col-sm-12">
    <span class="text-muted">Add New Case</span>
  </div>
</div>
<mat-divider></mat-divider>
<div style="margin-top: 10px">
  <form [formGroup]="caseForm">
    <div class="row">
      <div class="col-sm-12">
        <mat-form-field appearance="outline">
          <mat-label>Case Number</mat-label>
          <input
            type="text"
            formControlName="caseNumber"
            matInput
            autocomplete="off"
          />
        </mat-form-field>
      </div>
      <div class="col-sm-12">
        <mat-form-field appearance="outline">
          <mat-label>Date</mat-label>
          <input matInput [matDatepicker]="datepicker" formControlName="date" />
          <mat-datepicker-toggle
            matSuffix
            [for]="datepicker"
          ></mat-datepicker-toggle>
          <mat-datepicker #datepicker></mat-datepicker>
        </mat-form-field>
      </div>
      <div class="col-sm-12">
        <mat-form-field appearance="outline">
          <mat-label>Patient</mat-label>
          <!-- <input type="text" matInput [matAutocomplete]="auto" /> -->
          <button
            mat-icon-button
            matSuffix
            title="Add new patient"
            (click)="addCustomer()"
          >
            <mat-icon>add_circle</mat-icon>
          </button>
          <mat-select matInput formControlName="patient">
            <ng-container *ngFor="let pt of patients$ | async">
              <mat-option [value]="pt.id" >
                {{ pt.firstName }} {{ pt.surname }}
              </mat-option>
            </ng-container>
          </mat-select>
        </mat-form-field>
      </div>
      <div class="col-sm-12">
        <mat-form-field appearance="outline">
          <mat-label>Status</mat-label>
          <mat-select formControlName="status" matInput>
            <mat-option [value]="'Active'">Active</mat-option>
            <mat-option [value]="'In Active'">In Active</mat-option>
          </mat-select>
        </mat-form-field>
      </div>
      <div class="col-sm-12" *ngIf="!loading">
        <save-area (save)="onSave()" (cancel)="onClose()"></save-area>
      </div>
      <div class="col-sm-12" *ngIf="loading">
        <app-loader [message]="'Saving case details...'"></app-loader>
      </div>
    </div>
  </form>
</div>
